@startuml
!include ../style.puml
skinparam ArrowFontStyle plain
skinparam defaultFontSize 18
skinparam ArrowFontSize 18
skinparam ParticipantFontSize 18
skinparam NoteFontSize 18
skinparam BoxFontSize 18

box Logic LOGIC_COLOR_T1
participant "logic:LogicManager" as LogicManager LOGIC_COLOR
participant "command:GradeCommand" as GradeCommand LOGIC_COLOR
participant "r:CommandResult" as CommandResult LOGIC_COLOR
end box

box Model MODEL_COLOR_T1
participant "model:Model" as Model MODEL_COLOR
participant "person:Person" as Person MODEL_COLOR
participant "gradeMap:GradeMap" as GradeMap MODEL_COLOR
end box

[-> LogicManager : execute("grade 1:3 en/midterm s/y")
activate LogicManager

LogicManager -> GradeCommand : execute(model)
activate GradeCommand

GradeCommand -> GradeCommand : super.execute(model)
activate GradeCommand #LightGray

GradeCommand -> Model : getFilteredPersonList()
activate Model
Model --> GradeCommand : list of persons [1,2,3]
deactivate Model

loop For each person in the filtered person list
    GradeCommand -> GradeCommand : applyActionToPerson(model, person)
    activate GradeCommand #LightBlue

    GradeCommand -> GradeMap : markExamPassed("midterm")
    activate GradeMap
    GradeMap --> GradeCommand
    deactivate GradeMap

    GradeCommand -> Model : setPerson(old, updated)
    activate Model
    Model --> GradeCommand
    deactivate Model

    deactivate GradeCommand
end

GradeCommand -> GradeCommand : buildResult(updatedPersons)
activate GradeCommand #LightGreen

create CommandResult
GradeCommand -> CommandResult
activate CommandResult
CommandResult --> GradeCommand
deactivate CommandResult
deactivate GradeCommand

GradeCommand --> LogicManager : CommandResult
deactivate GradeCommand

[<-- LogicManager
deactivate LogicManager
@enduml
